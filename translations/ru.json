{
  "title": "Smart Thermostat",
  "config": {
    "step": {
      "user": {
        "title": "Умный термостат с компенсацией смещения",
        "description": "Выберите термостат, один или несколько датчиков температуры помещения и целевую температуру.",
        "data": {
          "climate_entity": "Термостат",
          "room_sensor_entities": "Датчики температуры помещения",
          "room_target": "Целевая температура в помещении",
          "window_sensor_entities": "Датчики окна (binary_sensor, опционально)"
        }
      }
    },
    "abort": {
      "already_configured": "Этот термостат уже настроен в другой записи."
    },
    "error": {
      "already_configured": "Этот термостат уже настроен в другой записи.",
      "no_room_sensor": "Выберите хотя бы один датчик температуры помещения"
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "Параметры управления",
        "description": "Тонкая настройка поведения контроллера. Изменения применяются сразу.",
        "data": {
          "window_sensor_entities": {
            "name": "Датчики окна (binary_sensor)",
            "description": "Если любой из датчиков покажет «открыто», термостат снизит уставку до минимальной и приостановит обучение. Полезно для проветривания."
          },
          "interval_sec": {
            "name": "Интервал управления (секунды)",
            "description": "Как часто контроллер проверяет температуру и принимает решения. Меньше — быстрее реакция, но больше нагрузка на систему. Рекомендуется 120–300 сек."
          },
          "deadband": {
            "name": "Мёртвая зона (°C)",
            "description": "Диапазон вокруг цели, в котором контроллер не меняет уставку. Увеличивает стабильность и снижает частые переключения радиатора."
          },
          "step_max": {
            "name": "Максимальное изменение за шаг (°C)",
            "description": "Максимум, на сколько контроллер может изменить уставку за один тик. Предотвращает резкие скачки."
          },
          "step_min": {
            "name": "Минимальный шаг изменения (°C)",
            "description": "Уставка всегда округляется до этого шага. Полезно для совместимости с TRV, которые поддерживают только определённые значения (0.5°C и т.п.)."
          },
          "learn_rate_fast": {
            "name": "Скорость быстрого обучения",
            "description": "Как быстро корректируется смещение, когда ошибка большая (> deadband). Большее значение — быстрее адаптация, но возможны колебания."
          },
          "learn_rate_slow": {
            "name": "Скорость медленного обучения",
            "description": "Как быстро корректируется смещение вблизи цели. Меньшее значение — более плавная и стабильная работа."
          },
          "min_offset_change": {
            "name": "Минимальное изменение смещения (°C)",
            "description": "Смещение обновляется только если изменение превышает это значение. Уменьшает мелкие колебания."
          },
          "enable_learning": {
            "name": "Включить обучение",
            "description": "Включает/выключает автоматическую компенсацию тепловой инерции и смещения. При выключении контроллер работает как простой пропорциональный регулятор."
          },
          "no_learn_summer": {
            "name": "Не обучаться летом (июнь-август)",
            "description": "Отключает обучение в летние месяцы, когда обогрев обычно не нужен и данные могут быть искажены."
          },
          "window_open_no_learn_min": {
            "name": "Не обучаться при открытом окне дольше (минуты)",
            "description": "Если окно открыто дольше указанного времени, обучение приостанавливается. Предотвращает неверное обучение при проветривании."
          },
          "trv_min": {
            "name": "Минимальная уставка термостата (°C)",
            "description": "Нижний предел, до которого контроллер может снижать уставку (например, при открытом окне)."
          },
          "trv_max": {
            "name": "Максимальная уставка термостата (°C)",
            "description": "Верхний предел уставки (для режима Boost и быстрого нагрева)."
          },
          "cooldown_sec": {
            "name": "Пауза между изменениями уставки (секунды)",
            "description": "Минимальное время между отправкой команд на термостат. Защищает от слишком частых изменений."
          },
          "boost_duration_sec": {
            "name": "Длительность режима Boost (секунды)",
            "description": "Сколько длится режим максимального нагрева при активации Boost."
          },
          "stuck_enable": {
            "name": "Включить детектор залипания/перегрева",
            "description": "Включает механизм, который снижает уставку, если температура долго не падает при ошибке в сторону перегрева."
          },
          "stuck_seconds": {
            "name": "Период наблюдения за перегревом (секунды)",
            "description": "Сколько времени температура должна не снижаться, чтобы сработал детектор залипания."
          },
          "stuck_min_drop": {
            "name": "Минимальное требуемое падение температуры (°C)",
            "description": "За указанный период температура должна упасть хотя бы на это значение, иначе считается «залипание»."
          },
          "stuck_step": {
            "name": "Шаг дополнительного снижения при перегреве (°C)",
            "description": "На сколько снижается уставка при срабатывании детектора залипания."
          },
          "heating_alpha": {
            "name": "Скорость адаптации скорости нагрева",
            "description": "Коэффициент экспоненциального сглаживания для оценки скорости нагрева помещения (0.01 — очень медленно, 0.5 — быстро)."
          },
          "overshoot_threshold": {
            "name": "Порог обнаружения перегрева (°C)",
            "description": "Если температура превысит цель больше чем на это значение, считается перегрев и замедляется обучение."
          },
          "predict_minutes": {
            "name": "Горизонт предсказания времени нагрева (минуты)",
            "description": "На сколько минут вперёд контроллер пытается предсказать достижение цели, чтобы избежать перегрева."
          },
          "stable_learn_seconds": {
            "name": "Период стабильности для обучения (секунды)",
            "description": "Сколько времени температура должна находиться в мёртвой зоне, чтобы применить стабильное обучение смещения."
          },
          "stable_learn_alpha": {
            "name": "Сила стабильного обучения",
            "description": "На сколько процентов смещение сдвигается к «идеальному» значению за один период стабильности (0.05 — медленно, 0.5 — быстро)."
          },
          "offset_decay_rate": {
            "name": "Скорость затухания смещения (% в день)",
            "description": "Смещение постепенно уменьшается к нулю, если давно не обновлялось. Помогает адаптироваться к смене сезона."
          },
          "offset_decay_threshold": {
            "name": "Минимальное смещение для затухания (°C)",
            "description": "Затухание начинается только если |смещение| больше этого значения."
          },
          "offset_learn_threshold": {
            "name": "Порог для стабильного обучения (°C)",
            "description": "Разница между текущим и предполагаемым смещением должна превышать этот порог, чтобы применить стабильное обучение."
          },
          "max_stuck_bias": {
            "name": "Максимальное накопленное снижение при залипании (°C)",
            "description": "Верхний предел дополнительного снижения уставки при многократном срабатывании детектора залипания."
          },
          "ttt_alpha": {
            "name": "Скорость обучения времени до цели (TTT)",
            "description": "Коэффициент сглаживания для оценки времени, необходимого для нагрева 1°C. 0.05 — медленно, 0.5 — быстро."
          },
          "ttt_soft_min": {
            "name": "Минимальное время для мягкой посадки (минуты)",
            "description": "Если предсказанное время до цели меньше этого значения, контроллер начинает плавно снижать уставку, чтобы избежать перегрева."
          },
          "outdoor_sensor_entity": {
            "name": "Датчик наружной температуры",
            "description": "Датчик температуры снаружи дома. Если температура низкая — контроллер добавляет компенсацию к уставке для предиктивного нагрева."
          },
          "weather_entity": {
            "name": "Погодная сущность",
            "description": "Weather entity (например, weather.home). Используется как альтернативный источник наружной температуры (attributes['temperature'])."
          }
        }
      }
    }
  },
  "entity": {
    "sensor": {
      "error": {
        "name": "Ошибка (цель − помещение)"
      },
      "offset": {
        "name": "Текущее смещение"
      },
      "target_trv": {
        "name": "Рассчитанная уставка термостата"
      },
      "last_set": {
        "name": "Последняя отправленная уставка"
      },
      "last_action": {
        "name": "Код последнего действия"
      },
      "last_action_text": {
        "name": "Последнее действие",
        "state": {
          "init": "Инициализация",
          "hold": "В мёртвой зоне — удержание",
          "deadband_rebase": "Перебазировка в мёртвой зоне",
          "deadband_init": "Инициализация в мёртвой зоне",
          "cooldown": "Ожидание cooldown",
          "set_temperature": "Уставка изменена",
          "skipped_no_change": "Изменение не требуется",
          "skipped_no_room_sensors": "Нет датчиков температуры",
          "skipped_no_valid_room_temp": "Нет валидных показаний температуры",
          "skipped_unavailable_climate": "Термостат недоступен",
          "boost": "Режим Boost",
          "window_open": "Окно открыто",
          "stuck_overtemp_down": "Детектор залипания: снижено",
          "stable_learn": "Стабильное обучение",
          "reset_offset": "Смещение сброшено"
        }
      },
      "change_count": {
        "name": "Количество изменений уставки"
      },
      "window_state": {
        "name": "Состояние окна",
        "state": {
          "open": "Открыто",
          "closed": "Закрыто"
        }
      },
      "boost_remaining": {
        "name": "Осталось времени Boost"
      },
      "boost_active": {
        "name": "Boost активен",
        "state": {
          "on": "Да",
          "off": "Нет"
        }
      },
      "heating_rate": {
        "name": "Текущая скорость нагрева (°C/мин)"
      },
      "predicted_time": {
        "name": "Предсказанное время до цели (мин)"
      }
    },
    "button": {
      "start_boost": {
        "name": "Запустить Boost"
      },
      "reset_offset": {
        "name": "Сбросить смещение"
      }
    },
    "number": {
      "room_target": {
        "name": "Целевая температура помещения"
      }
    },
    "climate": {
      "virtual_thermostat": {
        "name": "Умный термостат"
      }
    }
  },
  "services": {
    "reset_offset": {
      "name": "Сбросить смещение",
      "description": "Сбросить накопленное смещение к нулю",
      "fields": {
        "entry_id": {
          "name": "ID записи",
          "description": "ID конфигурационной записи интеграции"
        }
      }
    },
    "start_boost": {
      "name": "Запустить Boost",
      "description": "Включить режим максимального нагрева на заданное время",
      "fields": {
        "entry_id": {
          "name": "ID записи",
          "description": "ID конфигурационной записи интеграции"
        },
        "duration": {
          "name": "Длительность (сек)",
          "description": "Длительность Boost (опционально, иначе по настройке)"
        }
      }
    }
  }
}